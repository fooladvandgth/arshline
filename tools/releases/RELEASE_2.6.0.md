# Arshline 2.6.0 — Stable Hoshyar (هوشیار)

تاریخ: 2025-09-28
شاخه: feature/user-groups
وضعیت: پایدارِ قابل استفاده، قابل تکمیل

## خلاصه
این انتشار، نسخهٔ پایدار اولیهٔ ترمینال هوشمند «هوشیار» را ارائه می‌کند. تمرکز بر UX طبیعی فارسی، ناوبری امن با clarify/confirm، بازگردانی سروری (Undo/Audit)، و هم‌سوسازی LLM با زمینهٔ UI است. قابلیت‌ها آمادهٔ گسترش به انواع سوالات بیشتر هستند.

## قابلیت‌های کلیدی
- UI انسانی: خروجی‌های دوستانه در ترمینال، بدون نمایش JSON خام؛ لاگ‌های کنسول با برچسب [TODO_REMOVE_LOG]
- Dark Mode: رنگ فسفری برای خروجی ترمینال در حالت تاریک با افکت درخشش
- زبان طبیعی و ناوبری: «برو فرم‌ها»، «بازش کن…»، «فرم جدید/می‌خوام فرم جدید»، و پشتیبانی از افعال محاوره‌ای
- Create Form: عبارات طبیعی ← تایید ← ایجاد فرم ← باز شدن بیلدر همان فرم
- Add Field (Short Text): «سوال پاسخ کوتاه اضافه کن» با audit/undo و پرش مستقیم به ادیتور همان سوال
- Clarify/Confirm: انتخاب فرم از روی عنوان/شناسه با fuzzy-match، تایید عملیات مخرب
- Undo/Audit: عملیات با undo_token و مسیر بازگشت سمت سرور
- LLM Context-Aware: در حالت AI کامل همیشه LLM؛ در هیبرید فقط هنگام ابهام؛ ارسال ui_tab/ui_route و دانش مرتبط با صفحه به LLM
- دسترس‌پذیری: ESC برای بستن، inert و مدیریت فوکوس؛ درگ پنل با نشانگر grab/grabbing و حفظ موقعیت

## فایل‌های تغییر یافته مهم
- assets/js/ui/ai-terminal.js — UX انسانی، context ارسال به سرور، undo inline، درگ پنل
- assets/css/dashboard.css — استایل پنل، سبز فسفری در تاریک، نشانگر grab/grabbing
- src/Core/Api.php — parser هیبرید/LLM، clarify/confirm، create_form طبیعی، add_field short_text، audit/undo
- src/Core/Ai/Capabilities.php — ثبت قابلیت add_field_short_text
- src/Dashboard/Dashboard.php — نسخهٔ داشبورد 2.6.0
- arshline.php — نسخهٔ افزونه 2.6.0 و enqueueهای مدرن
- CHANGELOG.md — توضیحات نسخه

## تست سریع (دستی)
1) ناوبری
   - «برو فرم‌ها» → تب فرم‌ها باز شود (هاش/هایلایت)
2) ساخت فرم
   - «فرم جدید» → پیام تایید → تایید → بیلدر فرم جدید باز شود
3) افزودن سوال کوتاه
   - «یک سوال با پاسخ کوتاه اضافه کن» → پیام تایید با انتخاب فرم (در صورت ابهام) → تایید → ادیتور سوال جدید باز شود
4) بازگردانی
   - بعد از افزودن سوال، دکمهٔ بازگردانی کلیک → پیام موفقیت و بازگشت وضعیت
5) LLM Routing
   - حالت parser را روی full-AI تنظیم کنید → دستورات مبهم با LLM حل شود؛ روی hybrid فقط در ابهام
6) Dark Mode
   - حالت تاریک را فعال کنید → خروجی ترمینال سبز فسفری و خواناست

## نکات انتشار
- در صورت فعال بودن لاگ‌ها با [TODO_REMOVE_LOG]، پیش از انتشار عمومی نهایی حذف شوند.
- کلید API و endpoint LLM باید در /ai/config تنظیم شده باشد.

## گام‌های بعدی (Backlog)
- پشتیبانی از long_text, multiple_choice, dropdown, rating در add_field
- بهبود پیام‌های انسانی و نمونه‌ها
- آزمون‌های واحد برای آژاکس AI و مسیرهای undo
